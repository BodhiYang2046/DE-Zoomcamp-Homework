FROM python:3.9

RUN apt-get update && apt-get install -y postgresql-client
RUN pip install pandas requests psycopg2 sqlalchemy pyarrow


# Copy the Python script into the image
WORKDIR /app
COPY import_parquet_to_postgres.py import_parquet_to_postgres.py
# COPY init.sql /docker-entrypoint-initdb.d/
# COPY ./green_taxi_trip_2022/*.parquet /parquet_data/

# Set environment variables
ENV DB_HOST=localhost
ENV DB_PORT=4345
ENV DB_NAME=green_taxi
ENV DB_USER=bodhi
ENV DB_PASSWORD=bodhi

# Run the Python script when the container starts
CMD ["python", "import_parquet_to_postgres.py"]
# ENTRYPOINT ["python", "ingest_data.py"]